{
  "version": 3,
  "sources": ["../../../../games/particle-pop/src/main.ts"],
  "sourcesContent": ["type Particle = { x: number; y: number; vx: number; vy: number; life: number }\n\nconst canvas = document.getElementById('game') as HTMLCanvasElement | null;\nif (!canvas) throw new Error('missing canvas');\nconst ctx = canvas.getContext('2d');\nif (!ctx) throw new Error('missing 2d context');\n\nlet particles: Particle[] = [];\n\nfunction spawn(x: number, y: number): void {\n  const next: Particle[] = [];\n  for (let i = 0; i < 80; i++) {\n    const a = Math.random() * Math.PI * 2;\n    const s = 40 + Math.random() * 220;\n    next.push({\n      x,\n      y,\n      vx: Math.cos(a) * s,\n      vy: Math.sin(a) * s,\n      life: 0.9 + Math.random() * 0.6\n    });\n  }\n  particles = [...particles, ...next];\n}\n\ncanvas.addEventListener('click', (e) => {\n  const rect = canvas.getBoundingClientRect();\n  const x = ((e.clientX - rect.left) / rect.width) * canvas.width;\n  const y = ((e.clientY - rect.top) / rect.height) * canvas.height;\n  spawn(x, y);\n});\n\nlet last = performance.now();\nfunction tick(now: number): void {\n  const dt = Math.min(0.033, (now - last) / 1000);\n  last = now;\n\n  particles = particles\n    .map((p) => ({\n      ...p,\n      x: p.x + p.vx * dt,\n      y: p.y + p.vy * dt,\n      vx: p.vx * Math.pow(0.02, dt),\n      vy: (p.vy + 400 * dt) * Math.pow(0.03, dt),\n      life: p.life - dt\n    }))\n    .filter((p) => p.life > 0);\n\n  ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n  ctx.fillStyle = '#0b0b10';\n  ctx.fillRect(0, 0, canvas.width, canvas.height);\n\n  for (const p of particles) {\n    const t = Math.max(0, Math.min(1, p.life));\n    const r = 1 + (1 - t) * 3;\n    ctx.globalAlpha = t;\n    ctx.fillStyle = '#9db7ff';\n    ctx.beginPath();\n    ctx.arc(p.x, p.y, r, 0, Math.PI * 2);\n    ctx.fill();\n  }\n  ctx.globalAlpha = 1;\n\n  requestAnimationFrame(tick);\n}\n\nrequestAnimationFrame(tick);\n"],
  "mappings": ";AAEA,IAAM,SAAS,SAAS,eAAe,MAAM;AAC7C,IAAI,CAAC,OAAQ,OAAM,IAAI,MAAM,gBAAgB;AAC7C,IAAM,MAAM,OAAO,WAAW,IAAI;AAClC,IAAI,CAAC,IAAK,OAAM,IAAI,MAAM,oBAAoB;AAE9C,IAAI,YAAwB,CAAC;AAE7B,SAAS,MAAM,GAAW,GAAiB;AACzC,QAAM,OAAmB,CAAC;AAC1B,WAAS,IAAI,GAAG,IAAI,IAAI,KAAK;AAC3B,UAAM,IAAI,KAAK,OAAO,IAAI,KAAK,KAAK;AACpC,UAAM,IAAI,KAAK,KAAK,OAAO,IAAI;AAC/B,SAAK,KAAK;AAAA,MACR;AAAA,MACA;AAAA,MACA,IAAI,KAAK,IAAI,CAAC,IAAI;AAAA,MAClB,IAAI,KAAK,IAAI,CAAC,IAAI;AAAA,MAClB,MAAM,MAAM,KAAK,OAAO,IAAI;AAAA,IAC9B,CAAC;AAAA,EACH;AACA,cAAY,CAAC,GAAG,WAAW,GAAG,IAAI;AACpC;AAEA,OAAO,iBAAiB,SAAS,CAAC,MAAM;AACtC,QAAM,OAAO,OAAO,sBAAsB;AAC1C,QAAM,KAAM,EAAE,UAAU,KAAK,QAAQ,KAAK,QAAS,OAAO;AAC1D,QAAM,KAAM,EAAE,UAAU,KAAK,OAAO,KAAK,SAAU,OAAO;AAC1D,QAAM,GAAG,CAAC;AACZ,CAAC;AAED,IAAI,OAAO,YAAY,IAAI;AAC3B,SAAS,KAAK,KAAmB;AAC/B,QAAM,KAAK,KAAK,IAAI,QAAQ,MAAM,QAAQ,GAAI;AAC9C,SAAO;AAEP,cAAY,UACT,IAAI,CAAC,OAAO;AAAA,IACX,GAAG;AAAA,IACH,GAAG,EAAE,IAAI,EAAE,KAAK;AAAA,IAChB,GAAG,EAAE,IAAI,EAAE,KAAK;AAAA,IAChB,IAAI,EAAE,KAAK,KAAK,IAAI,MAAM,EAAE;AAAA,IAC5B,KAAK,EAAE,KAAK,MAAM,MAAM,KAAK,IAAI,MAAM,EAAE;AAAA,IACzC,MAAM,EAAE,OAAO;AAAA,EACjB,EAAE,EACD,OAAO,CAAC,MAAM,EAAE,OAAO,CAAC;AAE3B,MAAI,UAAU,GAAG,GAAG,OAAO,OAAO,OAAO,MAAM;AAE/C,MAAI,YAAY;AAChB,MAAI,SAAS,GAAG,GAAG,OAAO,OAAO,OAAO,MAAM;AAE9C,aAAW,KAAK,WAAW;AACzB,UAAM,IAAI,KAAK,IAAI,GAAG,KAAK,IAAI,GAAG,EAAE,IAAI,CAAC;AACzC,UAAM,IAAI,KAAK,IAAI,KAAK;AACxB,QAAI,cAAc;AAClB,QAAI,YAAY;AAChB,QAAI,UAAU;AACd,QAAI,IAAI,EAAE,GAAG,EAAE,GAAG,GAAG,GAAG,KAAK,KAAK,CAAC;AACnC,QAAI,KAAK;AAAA,EACX;AACA,MAAI,cAAc;AAElB,wBAAsB,IAAI;AAC5B;AAEA,sBAAsB,IAAI;",
  "names": []
}
